(this["webpackJsonpwebrtc-app"]=this["webpackJsonpwebrtc-app"]||[]).push([[0],{13:function(e,t,n){},29:function(e,t){e.exports=require("electron")},32:function(e,t,n){e.exports=n(61)},37:function(e,t,n){},38:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(5),i=n.n(c),o=(n(37),n(38),n(7)),u=n.n(o),s=n(19),l=n(25),d=n(29),m=n(63),p=n(13),f=n.n(p),h=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(r.useRef)(null),i=Object(r.useState)(!1),o=Object(l.a)(i,2),p=o[0],h=o[1],v=Object(r.useState)(!1),g=Object(l.a)(v,2),b=g[0],w=g[1];Object(r.useEffect)((function(){e.current&&t.current&&y()}),[p]),Object(r.useEffect)((function(){n.current&&c.current&&j()}),[b]);var y=function(){var e=Object(s.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 2:n=e.sent,t.current.srcObject=n,t.current.onloadedmetadata=function(){t.current.play()},E();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function n(){e.current.getContext("2d").drawImage(t.current,0,0,500,400),requestAnimationFrame(n)},j=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.desktopCapturer.getSources({types:["screen"]}).then(function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t[0].id,minWidth:500,maxWidth:500,minHeight:400,maxHeight:400}}});case 3:n=e.sent,c.current.srcObject=n,c.current.onloadedmetadata=function(){c.current.play()},k(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function e(){n.current.getContext("2d").drawImage(c.current,0,0,500,400),requestAnimationFrame(e)};return a.a.createElement("div",null,a.a.createElement("div",{id:"mediaWrapper",className:f.a.mediaWrapper},a.a.createElement("canvas",{width:500,height:400,id:"monitor",ref:e,style:{background:"lightgreen"}}),a.a.createElement("canvas",{width:500,height:400,id:"recorder",ref:n,style:{background:"lightskyblue"}}),a.a.createElement("video",{id:"monitorVideo",ref:t,className:f.a.video,autoPlay:!1,width:500,height:400}),a.a.createElement("video",{id:"recorderVideo",ref:c,className:f.a.video,autoPlay:!1,width:500,height:400})),a.a.createElement("div",{className:f.a.btnWrapper},a.a.createElement("div",null,a.a.createElement(m.a,{type:"primary",onClick:function(){h(!0)}},"\u5f00\u542f\u6444\u50cf\u5934")),a.a.createElement("div",null,a.a.createElement(m.a,{type:"primary",onClick:function(){w(!0)}},"\u5f55\u5236\u5c4f\u5e55"))))};var v=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(60);i.a.render(a.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.d6317fd4.chunk.js.map